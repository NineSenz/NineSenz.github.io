(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{458:function(s,n,e){"use strict";e.r(n);var a=e(2),t=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一、user模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、user模块"}},[s._v("#")]),s._v(" 一、user模块")]),s._v(" "),n("p",[s._v("user模块用于管理用户账号和用户属性")]),s._v(" "),n("p",[s._v("https://docs.ansible.com/ansible/latest/modules/user_module.html#user-module")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("常用参数")]),s._v(" "),n("th",[s._v("说明")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v('name=""')]),s._v(" "),n("td",[s._v("指定用户名")])]),s._v(" "),n("tr",[n("td",[s._v('password=""')]),s._v(" "),n("td",[s._v("指定密码,必须是密文")])]),s._v(" "),n("tr",[n("td",[s._v("state= absent|present")]),s._v(" "),n("td",[s._v("删除|创建")])]),s._v(" "),n("tr",[n("td",[s._v("system= yes|no")]),s._v(" "),n("td",[s._v("是否为系统用户")])]),s._v(" "),n("tr",[n("td",[s._v('shell=""')]),s._v(" "),n("td",[s._v("指定登陆shell")])]),s._v(" "),n("tr",[n("td",[s._v("generate_ssh_key= yes|no")]),s._v(" "),n("td",[s._v("是否创建秘钥对")])]),s._v(" "),n("tr",[n("td",[s._v("uid=")]),s._v(" "),n("td",[s._v("指定用户的uid")])]),s._v(" "),n("tr",[n("td",[s._v("append= yes|no")]),s._v(" "),n("td",[s._v("用户是否追加到其他组")])]),s._v(" "),n("tr",[n("td",[s._v("group=")]),s._v(" "),n("td",[s._v("用户属组")])]),s._v(" "),n("tr",[n("td",[s._v("groups=")]),s._v(" "),n("td",[s._v("将现有用户加入到某个组，空值就会把该用户从所有所属组中删除")])]),s._v(" "),n("tr",[n("td",[s._v("create_home= yes|no")]),s._v(" "),n("td",[s._v("是否建立家目录")])]),s._v(" "),n("tr",[n("td",[s._v("remove= yes|no")]),s._v(" "),n("td",[s._v("删除家目录")])])])]),s._v(" "),n("p",[n("strong",[s._v("创建一个用户sky，密码是123")])]),s._v(" "),n("p",[n("strong",[s._v("要求是系统用户")])]),s._v(" "),n("p",[n("strong",[s._v("非交互式登陆")])]),s._v(" "),n("p",[n("strong",[s._v("要求生成自己的秘钥对")])]),s._v(" "),n("p",[n("strong",[s._v("不创建家目录")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#密码必须是密文，所以先要把明文转换一下，生成md5密文\n[root@manage01 ~]# echo 123|openssl passwd -1 -stdin\n$1$5V.qzSEd$Yr08MU8K.vXeBZcmavypk1\n[root@manage01 ~]# ansible -m user group1 -a \'name=sky password="$1$5V.qzSEd$Yr08MU8K.vXeBZcmavypk1" state=present system=yes shell=/sbin/nologin generate_ssh_key=yes\'\n192.168.98.203 | CHANGED => {\n    "ansible_facts": {\n        "discovered_interpreter_python": "/usr/libexec/platform-python"\n    },\n    "changed": true,\n    "comment": "",\n    "create_home": true,\n    "group": 991,\n    "home": "/home/sky",\n    "name": "sky",\n    "password": "NOT_LOGGING_PASSWORD",\n    "shell": "/sbin/nologin",\n    "ssh_fingerprint": "2048 SHA256:b2umG0XfPW0cGAFBFDBNBNbtgaY+s1X4cM334JCGGOo ansible-generated on node3 (RSA)",\n    "ssh_key_file": "/home/sky/.ssh/id_rsa",\n    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDIvVcTDxT4GotFYolpPPJUS2XYEmgaxCj/YLXfW2vllXJSfa3TwBLN6kJnPBabVFSYCiGRzci28f/rx4chm9TuVsNx6TozzUpolD+T3vzO/rcLdaIEzw+JYXGtqpaTapuuhm6pdQBx04TLmO3pVWBCdbJum0paMIXwPDcGPGz6JwGXWTdA5AXfvWmOZ5ChwwLDUau84R47FHfj9EisclYM3Yt3WfcVp+waSd23BBRj86jh+veL9BR7OnDmmj7YZkOxAqnU/TjuOW1uiGCB91Flgku7fPR3jmbXXrd+Ql9vWlGe22+xgYYjT4KVzlHAr3lE/HZQu49Vz/N78ZnJ1rX3 ansible-generated on node3",\n    "state": "present",\n    "system": true,\n    "uid": 994\n}\n192.168.98.201 | CHANGED => {\n    "ansible_facts": {\n        "discovered_interpreter_python": "/usr/libexec/platform-python"\n    },\n    "changed": true,\n    "comment": "",\n    "create_home": true,\n    "group": 974,\n    "home": "/home/sky",\n    "name": "sky",\n    "password": "NOT_LOGGING_PASSWORD",\n    "shell": "/sbin/nologin",\n    "ssh_fingerprint": "2048 SHA256:D2ZhPJV9bdFMtf7EBo3Y5w023xqxDppZxqoe5Z3NVus ansible-generated on node1 (RSA)",\n    "ssh_key_file": "/home/sky/.ssh/id_rsa",\n    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQD1swS5MAox4o2f3rxe9TPz+AFDnB5Jt+X6Yygpphfetfds37SHSP5K4QcAd1SO6OlHopB3x9FQklS3z6C4bfz5trbK/PR9RCzkkzLamC5BKhNXEV2ozj1m2J/F10umZLSvd3ElEJubkyzV383x7sVi5VtQycemoDLiJiWjHTEcKu/I0bSCliODe57nqgM9+5V+nfeih56Vs+vhTGIxqZ/6FZXKGM9iDiI8VokUlMjhOJz5MuFRr4XsgBvtGNyu/bCbjr8QPdDNX/Wl8IZDjLJNHDno8ixc7Bp6ME2hEr9pnpe+DuKJmsAwl+A52E7eAlm/0pp573mZ4ObHRTQwdgQT ansible-generated on node1",\n    "state": "present",\n    "system": true,\n    "uid": 976\n}\n192.168.98.202 | CHANGED => {\n    "ansible_facts": {\n        "discovered_interpreter_python": "/usr/libexec/platform-python"\n    },\n    "changed": true,\n    "comment": "",\n    "create_home": true,\n    "group": 975,\n    "home": "/home/sky",\n    "name": "sky",\n    "password": "NOT_LOGGING_PASSWORD",\n    "shell": "/sbin/nologin",\n    "ssh_fingerprint": "2048 SHA256:/VBzZUWcHnLOpMNxq9OXIwD/5IkI9r7smp50s6lByZs ansible-generated on node2 (RSA)",\n    "ssh_key_file": "/home/sky/.ssh/id_rsa",\n    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDT/+8y3omHiWSOS9dX1AYcADRp7ZUszOBqZV0/77TZ7mV5X1/T+cdZrsnwAiNbXosjDQjKj0qtIJQR3rLuCv08DV6gjlP4bzDodSekfh1mbGu9EkDu0HD+qmW0/y5Mb4lJbBCMHCVJFrwBnH2+AfVezTVgcf4NHh4zJvASnSfmecmyfFEDEVZIozd0z8hw8NcgcYn8MeDrMhVN+y3xj0IXKwg6E0NindBuxkMYbwehcQo6Sscx9YdCv05SXVU+FjyPOQNzZZUQkmp+5GDy1dib1m5GJ5yIf8IzOh1FISoKz8/FqORRIEp55NRgrGw3ZU/weK0RL9SkXhUc29gcN1ON ansible-generated on node2",\n    "state": "present",\n    "system": true,\n    "uid": 977\n}\n\n\n\n创建用户baishuming  密码为123456\n[root@manage01 ~]# echo "123456"|openssl passwd -1 -stdin\n$1$BMPgiHeV$GskMFnvqBL17gTe/us5yK.\n[root@manage01 ~]# ansible -m user group1 -a \'name=baishuming password="$1$BMPgiHeV$GskMFnvqBL17gTe/us5yK." uid=4423\'\n\n不创建家目录\n[root@manage01 ~]# ansible -m user 192.168.98.201 -a "name=baism create_home=no"\n\n要求属组为root\n附加组为sko\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br")])]),n("p",[s._v("用户删除")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('[root@manage01 ~]# ansible -m user 192.168.98.201 -a "name=baishuming1 state=absent remove=yes"\n192.168.98.201 | CHANGED => {\n    "ansible_facts": {\n        "discovered_interpreter_python": "/usr/bin/python"\n    }, \n    "changed": true, \n    "force": false, \n    "name": "baishuming1", \n    "remove": true, \n    "state": "absent"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"二、学习视频"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、学习视频"}},[s._v("#")]),s._v(" 二、学习视频")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.bilibili.com/video/BV19J41167sM?p=16",target:"_blank",rel:"noopener noreferrer"}},[s._v("视频：user模块"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);